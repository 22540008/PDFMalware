# main.py

import streamlit as st
import pandas as pd
from github import Github
from feature_extraction import extract_features, save_features_to_csv

import numpy as np
# import joblib
import PyPDF2
# import os
# import re
# import nltk
# from nltk.corpus import stopwords
# from nltk.stem import PorterStemmer
# from nltk.tokenize import word_tokenize
# import string
import seaborn as sns
import warnings
# import base64
# import time
# import io
# import requests
from PIL import Image
import matplotlib.pyplot as plt
warnings.filterwarnings('ignore')

# nltk.download('stopwords')
# nltk.download('punkt')
# nltk.download('wordnet')
# nltk.download('averaged_perceptron_tagger')

st.sidebar.header('User Input Features')
uploaded_file = st.sidebar.file_uploader("Upload your input PDF file", type=["pdf"])

def load_pdf(uploaded_file):
    pdfFileObj = open(uploaded_file, 'rb')
    pdfReader = PyPDF2.PdfFileReader(pdfFileObj)
    pageObj = pdfReader.getPage(0)
    return pageObj.extractText()

def load_data(uploaded_file):
    text = load_pdf(uploaded_file)
    # text = load_pdf(uploaded_file.name)
    text = text.replace('\n', ' ')
    text = text.replace('\r', ' ')
    text = text.replace('\t', ' ')
    text = text.replace('\xa0', ' ')
    text = text.replace('\x0c', ' ')
    text = text.replace('\x0b', ' ')
    text = text.replace('\x0e', ' ')
    text = text.replace('\x0f', ' ')
    text = text.replace('\x1c', ' ')
    text = text.replace('\x1d', ' ')
    text = text.replace('\x1e', ' ')
    text = text.replace('\x1f', ' ')
    text = text.replace('\x7f', ' ')
    text = text.replace('\x81', ' ')
    text = text.replace('\x8d', ' ')
    text = text.replace('\x8f', ' ')
    text = text.replace('\x9d', ' ')
    text = text.replace('\xad', ' ')
    text = text.replace('\x9f', ' ')
    text = text.replace('\x92', ' ')
    text = text.replace('\x93', ' ')
    text = text.replace('\x94', ' ')
    text = text.replace('\x95', ' ')
    text = text.replace('\x96', ' ')
    text = text.replace('\x97', ' ')
    text = text.replace('\x98', ' ')
    text = text.replace('\x99', ' ')
    text = text.replace('\x9a', ' ')
    text = text.replace('\x9b', ' ')
    text = text.replace('\x9c', ' ')
    text = text.replace('\x9e', ' ')
    text = text.replace('\x80', ' ')
    text = text.replace('\x82', ' ')
    text = text.replace('\x83', ' ')
    text = text.replace('\x84', ' ')
    text = text.replace('\x85', ' ')
    text = text.replace('\x86', ' ')
    text = text.replace('\x87', ' ')
    text = text.replace('\x88', ' ')
    text = text.replace('\x89', ' ')
    text = text.replace('\x8a', ' ')
    text = text.replace('\x8b', ' ')
    text = text.replace('\x8c', ' ')
    return text

def main():
    st.title("PDF Viewer")
    uploaded_file = st.file_uploader("Upload a PDF file", type=["pdf"])
    if uploaded_file is not None:
        file_contents = uploaded_file.read()
        st.write("PDF content:")
        text = load_data(file_contents)
        st.write(text)

if __name__ == "__main__":
    main()
