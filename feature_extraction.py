# feature_extraction.py
import fitz
import os
import pandas as pd

def extract_features(pdf_path):
    res = pd.DataFrame(columns=('pdfsize', 'metadata size', 'pages', 'xref length', 'title characters', 'isEncrypted', 'embedded files', 'images', 'contains text'))

    i = 0

    try:
        doc = fitz.open(pdf_path)
    except:
        print("Error opening PDF:", pdf_path)
        # Handle the error appropriately
        return res

    metadata = doc.metadata
    isEncrypted = 0

    if metadata:
        title = metadata.get('title', '')
        isEncrypted = metadata['encryption']
        if not isEncrypted:
            isEncrypted = 0
        else:
            isEncrypted = 1

    objects = doc.xref_length()
    numPages = doc.page_count
    pdfsize = int(os.path.getsize(pdf_path) / 1000)

    found = "No"
    text = ""

    try:
        for page in doc:
            text += page.get_text()
            if len(text) > 100:
                found = "Yes"
            
